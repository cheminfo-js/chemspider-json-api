(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.chemspiderJsonApi=b():a.chemspiderJsonApi=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=3)}([function(a){a.exports=function(a){return null!==a&&'object'==typeof a}},function(a,b){'use strict';b.searchMethods=['SimpleSearch','ExactStructureSearch','SubstructureSearch','SimilaritySearch','IntrinsicPropertiesSearch','DataSourceSearch','ElementsSearch','PredictedPropertiesSearch','AdvancedSearch'],b.resultMethods=['GetSearchResult','GetSearchResultWithRelevance','GetSearchResultAsCompounds','GetSearchResultAsSdf'],b.chemspiderUrl='https://www.cheminfo.org/chemspider/JSON.ashx'},function(a,b,c){function d(){}function e(a){if(!p(a))return a;var b=[];for(var c in a)f(b,c,a[c]);return b.join('&')}function f(a,b,c){if(!(null!=c))null===c&&a.push(encodeURIComponent(b));else if(Array.isArray(c))c.forEach(function(c){f(a,b,c)});else if(p(c))for(var d in c)f(a,b+'['+d+']',c[d]);else a.push(encodeURIComponent(b)+'='+encodeURIComponent(c))}function g(a){for(var b,c,d={},e=a.split('&'),f=0,g=e.length;f<g;++f)b=e[f],c=b.indexOf('='),-1==c?d[decodeURIComponent(b)]='':d[decodeURIComponent(b.slice(0,c))]=decodeURIComponent(b.slice(c+1));return d}function h(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(':'),d=c.slice(0,b).toLowerCase(),e=u(c.slice(b+1)),g[d]=e;return g}function i(a){return /[\/+]json\b/.test(a)}function j(a){this.req=a,this.xhr=this.req.xhr,this.text='HEAD'!=this.req.method&&(''===this.xhr.responseType||'text'===this.xhr.responseType)||'undefined'==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var b=this.xhr.status;1223===b&&(b=204),this._setStatusProperties(b),this.header=this.headers=h(this.xhr.getAllResponseHeaders()),this.header['content-type']=this.xhr.getResponseHeader('content-type'),this._setHeaderProperties(this.header),this.body=null===this.text&&a._responseType?this.xhr.response:'HEAD'==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function k(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on('end',function(){var a=null,b=null;try{b=new j(c)}catch(b){return a=new Error('Parser is unable to parse the response'),a.parse=!0,a.original=b,c.xhr?(a.rawResponse='undefined'==typeof c.xhr.responseType?c.xhr.responseText:c.xhr.response,a.status=c.xhr.status?c.xhr.status:null,a.statusCode=a.status):(a.rawResponse=null,a.status=null),c.callback(a)}c.emit('response',b);var d;try{c._isResponseOK(b)||(d=new Error(b.statusText||'Unsuccessful HTTP response'),d.original=a,d.response=b,d.status=b.status)}catch(a){d=a}d?c.callback(d,b):c.callback(null,b)})}function l(a,b,c){var d=t('DELETE',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}var m;'undefined'==typeof window?'undefined'==typeof self?(console.warn('Using browser-only version of superagent in non-browser environment'),m=this):m=self:m=window;var n=c(4),o=c(6),p=c(0),q=c(5),r=c(7),s=c(8);var t=b=a.exports=function(a,c){return'function'==typeof c?new b.Request('GET',a).end(c):1==arguments.length?new b.Request('GET',a):new b.Request(a,c)};b.Request=k,t.getXHR=function(){if(m.XMLHttpRequest&&(!m.location||'file:'!=m.location.protocol||!m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject('Microsoft.XMLHTTP')}catch(a){}try{return new ActiveXObject('Msxml2.XMLHTTP.6.0')}catch(a){}try{return new ActiveXObject('Msxml2.XMLHTTP.3.0')}catch(a){}try{return new ActiveXObject('Msxml2.XMLHTTP')}catch(a){}throw Error('Browser-only verison of superagent could not find XHR')};var u=function(a){return a.trim()};t.serializeObject=e,t.parseString=g,t.types={html:'text/html',json:'application/json',xml:'application/xml',urlencoded:'application/x-www-form-urlencoded',form:'application/x-www-form-urlencoded',"form-data":'application/x-www-form-urlencoded'},t.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify},t.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},r(j.prototype),j.prototype._parseBody=function(a){var b=t.parse[this.type];return this.req._parser?this.req._parser(this,a):(!b&&i(this.type)&&(b=t.parse['application/json']),b&&a&&(a.length||a instanceof Object)?b(a):null)},j.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d='cannot '+b+' '+c+' ('+this.status+')',e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},t.Response=j,n(k.prototype),o(k.prototype),k.prototype.type=function(a){return this.set('Content-Type',t.types[a]||a),this},k.prototype.accept=function(a){return this.set('Accept',t.types[a]||a),this},k.prototype.auth=function(a,b,c){switch('object'==typeof b&&null!==b&&(c=b),c||(c={type:'function'==typeof btoa?'basic':'auto'}),c.type){case'basic':this.set('Authorization','Basic '+btoa(a+':'+b));break;case'auto':this.username=a,this.password=b;break;case'bearer':this.set('Authorization','Bearer '+a);}return this},k.prototype.query=function(a){return'string'!=typeof a&&(a=e(a)),a&&this._query.push(a),this},k.prototype.attach=function(a,b,c){if(b){if(this._data)throw Error('superagent can\'t mix .send() and .attach()');this._getFormData().append(a,b,c||b.name)}return this},k.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},k.prototype.callback=function(a,b){if(this._maxRetries&&this._retries++<this._maxRetries&&s(a,b))return this._retry();var c=this._callback;this.clearTimeout(),a&&(this._maxRetries&&(a.retries=this._retries-1),this.emit('error',a)),c(a,b)},k.prototype.crossDomainError=function(){var a=new Error('Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},k.prototype.buffer=k.prototype.ca=k.prototype.agent=function(){return console.warn('This is not supported in browser version of superagent'),this},k.prototype.pipe=k.prototype.write=function(){throw Error('Streaming is not supported in browser version of superagent')},k.prototype._appendQueryString=function(){var a=this._query.join('&');if(a&&(this.url+=(0<=this.url.indexOf('?')?'&':'?')+a),this._sort){var b=this.url.indexOf('?');if(0<=b){var c=this.url.substring(b+1).split('&');q(this._sort)?c.sort(this._sort):c.sort(),this.url=this.url.substring(0,b)+'?'+c.join('&')}}},k.prototype._isHost=function(a){return a&&'object'==typeof a&&!Array.isArray(a)&&'[object Object]'!==Object.prototype.toString.call(a)},k.prototype.end=function(a){return this._endCalled&&console.warn('Warning: .end() was called twice. This is not supported in superagent'),this._endCalled=!0,this._callback=a||d,this._appendQueryString(),this._end()},k.prototype._end=function(){var a=this,b=this.xhr=t.getXHR(),c=this._formData||this._data;this._setTimeouts(),b.onreadystatechange=function(){var c=b.readyState;if(2<=c&&a._responseTimeoutTimer&&clearTimeout(a._responseTimeoutTimer),4==c){var d;try{d=b.status}catch(a){d=0}return d?void a.emit('end'):a.timedout||a._aborted?void 0:a.crossDomainError()}};var d=function(b,c){0<c.total&&(c.percent=100*(c.loaded/c.total)),c.direction=b,a.emit('progress',c)};if(this.hasListeners('progress'))try{b.onprogress=d.bind(null,'download'),b.upload&&(b.upload.onprogress=d.bind(null,'upload'))}catch(a){}try{this.username&&this.password?b.open(this.method,this.url,!0,this.username,this.password):b.open(this.method,this.url,!0)}catch(a){return this.callback(a)}if(this._withCredentials&&(b.withCredentials=!0),!this._formData&&'GET'!=this.method&&'HEAD'!=this.method&&'string'!=typeof c&&!this._isHost(c)){var e=this._header['content-type'],f=this._serializer||t.serialize[e?e.split(';')[0]:''];!f&&i(e)&&(f=t.serialize['application/json']),f&&(c=f(c))}for(var g in this.header)null!=this.header[g]&&this.header.hasOwnProperty(g)&&b.setRequestHeader(g,this.header[g]);return this._responseType&&(b.responseType=this._responseType),this.emit('request',this),b.send('undefined'==typeof c?null:c),this},t.get=function(a,b,c){var d=t('GET',a);return'function'==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},t.head=function(a,b,c){var d=t('HEAD',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},t.options=function(a,b,c){var d=t('OPTIONS',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d};t.del=l,t['delete']=l,t.patch=function(a,b,c){var d=t('PATCH',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},t.post=function(a,b,c){var d=t('POST',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},t.put=function(a,b,c){var d=t('PUT',a);return'function'==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},function(a,b,c){'use strict';function d(a,b){return new Promise(function(c){setTimeout(function(){c(b)},a)})}function e(a){return Object.prototype.toString.call(a).slice(8,-1)}function f(a,b,c){var d=!1;c||(d=!0,c=h.chemspiderUrl+`?op=${a}`);var g=e(b);if('Object'===g)for(var j=Object.keys(b),k=0;k<j.length;k++)c=d?f(j[k],b[j[k]],c):f(`${a}.${j[k]}`,b[j[k]],c);else if('Array'===g)for(var k=0;k<b.length;k++)c+=`&${a}[${k}]=${b[k]}`;else c+=`&${a}=${b}`;return c}var g=c(2),h=c(1);b=a.exports={query:function(a,b){if(!a)throw new Error('Operation parameter is mandatory');b=Object.assign({},b);var c=f(a,b);return g.get(c).timeout({response:2e4}).then((a)=>a.text)},queryWithRid:function(a,c){function e(i){return g++,g==h||i.timeout?Promise.reject(i):d(f).then(()=>b.queryJSON(a,c)).then(null,e)}var f=100,g=0,h=10;return b.queryJSON(a,c).then(null,e)},queryJSON:function(a,c){return b.query(a,c).then((a)=>JSON.parse(a))},search:function(a){a=a||{};var c=a.searchMethod||'SimpleSearch',d=a.resultMethod||'GetSearchResultAsCompounds',e=a.searchOptions||{},f=a.resultOptions||{};return h.searchMethods.includes(c)?h.resultMethods.includes(d)?b.query(c,e).then((a)=>{return b.queryWithRid(d,Object.assign({},f,{rid:a}))}):Promise.reject(new Error('Invalid result method')):Promise.reject(new Error('Invalid search method'))}}},function(a){function b(a){if(a)return c(a)}function c(a){for(var c in b.prototype)a[c]=b.prototype[c];return a}a.exports=b;b.prototype.on=b.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks['$'+a]=this._callbacks['$'+a]||[]).push(b),this},b.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks['$'+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks['$'+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks['$'+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},b.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks['$'+a]||[]},b.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(a,b,c){var d=c(0);a.exports=function(a){var b=d(a)?Object.prototype.toString.call(a):'';return'[object Function]'===b}},function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=c(0);a.exports=d,d.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},d.prototype.parse=function(a){return this._parser=a,this},d.prototype.responseType=function(a){return this._responseType=a,this},d.prototype.serialize=function(a){return this._serializer=a,this},d.prototype.timeout=function(a){if(!a||'object'!=typeof a)return this._timeout=a,this._responseTimeout=0,this;for(var b in a)'deadline'===b?this._timeout=a.deadline:'response'===b?this._responseTimeout=a.response:console.warn('Unknown timeout option',b);return this},d.prototype.retry=function(a){return(0===arguments.length||!0===a)&&(a=1),0>=a&&(a=0),this._maxRetries=a,this._retries=0,this},d.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},d.prototype.then=function(a,b){if(!this._fullfilledPromise){var c=this;this._endCalled&&console.warn('Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises'),this._fullfilledPromise=new Promise(function(a,b){c.end(function(c,d){c?b(c):a(d)})})}return this._fullfilledPromise.then(a,b)},d.prototype.catch=function(a){return this.then(void 0,a)},d.prototype.use=function(a){return a(this),this},d.prototype.ok=function(a){if('function'!=typeof a)throw Error('Callback required');return this._okCallback=a,this},d.prototype._isResponseOK=function(a){return!!a&&(this._okCallback?this._okCallback(a):200<=a.status&&300>a.status)},d.prototype.get=function(a){return this._header[a.toLowerCase()]},d.prototype.getHeader=d.prototype.get,d.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},d.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},d.prototype.field=function(a,b){if(null===a||void 0===a)throw new Error('.field(name, val) name can not be empty');if(this._data&&console.error('.field() can\'t be used if .send() is used. Please use only .send() or only .field() & .attach()'),f(a)){for(var c in a)this.field(c,a[c]);return this}if(Array.isArray(b)){for(var d in b)this.field(a,b[d]);return this}if(null===b||void 0===b)throw new Error('.field(name, val) val can not be empty');return'boolean'==typeof b&&(b=''+b),this._getFormData().append(a,b),this},d.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit('abort'),this)},d.prototype.withCredentials=function(a){return void 0==a&&(a=!0),this._withCredentials=a,this},d.prototype.redirects=function(a){return this._maxRedirects=a,this},d.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},d.prototype.send=function(a){var b=f(a),c=this._header['content-type'];if(this._formData&&console.error('.send() can\'t be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()'),b&&!this._data)Array.isArray(a)?this._data=[]:!this._isHost(a)&&(this._data={});else if(a&&this._data&&this._isHost(this._data))throw Error('Can\'t merge these send calls');if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else'string'==typeof a?(c||this.type('form'),c=this._header['content-type'],this._data='application/x-www-form-urlencoded'==c?this._data?this._data+'&'+a:a:(this._data||'')+a):this._data=a;return!b||this._isHost(a)?this:(c||this.type('json'),this)},d.prototype.sortQuery=function(a){return this._sort='undefined'==typeof a||a,this},d.prototype._timeoutError=function(a,b,c){if(!this._aborted){var d=new Error(a+b+'ms exceeded');d.timeout=b,d.code='ECONNABORTED',d.errno=c,this.timedout=!0,this.abort(),this.callback(d)}},d.prototype._setTimeouts=function(){var a=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){a._timeoutError('Timeout of ',a._timeout,'ETIME')},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){a._timeoutError('Response timeout of ',a._responseTimeout,'ETIMEDOUT')},this._responseTimeout))}},function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=c(9);a.exports=d,d.prototype.get=function(a){return this.header[a.toLowerCase()]},d.prototype._setHeaderProperties=function(a){var b=a['content-type']||'';this.type=f.type(b);var c=f.params(b);for(var d in c)this[d]=c[d];this.links={};try{a.link&&(this.links=f.parseLinks(a.link))}catch(a){}},d.prototype._setStatusProperties=function(a){var b=0|a/100;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.redirect=3==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.forbidden=403==a,this.notFound=404==a}},function(a){var b=['ECONNRESET','ETIMEDOUT','EADDRINFO','ESOCKETTIMEDOUT'];a.exports=function(a,c){return a&&a.code&&~b.indexOf(a.code)||c&&c.status&&500<=c.status||a&&'timeout'in a&&'ECONNABORTED'==a.code||a&&'crossDomain'in a}},function(a,b){b.type=function(a){return a.split(/ *; */).shift()},b.params=function(a){return a.split(/ *; */).reduce(function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})},b.parseLinks=function(a){return a.split(/ *, */).reduce(function(a,b){var c=b.split(/ *; */),d=c[0].slice(1,-1),e=c[1].split(/ *= */)[1].slice(1,-1);return a[e]=d,a},{})},b.cleanHeader=function(a,b){return delete a['content-type'],delete a['content-length'],delete a['transfer-encoding'],delete a.host,b&&delete a.cookie,a}}])});
//# sourceMappingURL=chemspider-json-api.min.js.map